# system_programming_final

```
확장 가상 기계 (XVM : eXtended Virtual Machine)

기존 단순 가상 기계 SVM(Simple Virtual Machine)에서는 두 가지 주소 지정(직접-절대, 직접-상대)만을 지원했었다.

ADD DATA 직접 - 절대 주소 
ADD DATA[X] 가변 레지스터 값(거리) + 고정 주소형태로 직접 - 상대 주소 

XVM은 더 다양한 주소 지정모드가 존재한다.

직접 - 간접
절대 - 상대
주소 - 즉시

위의 세 가지 관점 외에 피연산자를 레지스터로 해석하는 레지스터 주소 지정모드를 들 수 있다.

XVM은 레지스터가 SVM의 기존 레지스터(U, X, A) 외에 베이스 레지스터 B와 두 개의 범용 레지스터(general purpose register) P, Q, 스택 포인터(Stack pointer) S가 추가되었다. 그 밖에 PC 레지스터의 크기가 24비트에서 32비트로 확장되어 지원할 수 있는 메모리 용량이 증대되었다.

IN000000XBCR0000000000000000000

연산 코드 맨 앞 두 비트를 I(immediate)와 N(iNdirect) 즉시와 간접 두 비트가 모두 1일 때는 직접 주소

I N 조합
0, 0 : 명령어를 예전의 SVM 기계어 포맷으로 해석한다.
1, 0 : 피연산자 부분을 즉시 주소(상수)로 해석한다.
0, 1 : 피연산자 부분을 간접 주소로 해석한다.
1, 1 : 피연산자 부분을 직접(일반) 주소로 해석한다.

X레지스터는 첨자 용도이고 B(Base 레지스터), C(PC, Program Counter)레지스터를 이용해서 이들 레지스터를 기준으로 하는 본격적인 상대 주소 지정 모드를 지원

B C 조합
0, 0 : 상대 주소 지정모드를 사용하지 않음
0, 1 : PC 레지스터에 거리인 피연산자 값을 더하여 최종 주소를 구함
1, 0 : B 레지스터에 거리인 피연산자 값을 더하여 최종 주소를 구함
1, 1 : 허용되지 않음

상수나 주소를 절대 주소로 사용하는 경우 B,C 를 0, 0으로 사용
B,C 를 1, 1으로 사용하면서 피연산자 부분이 1바이트 확장된 명령어 포맷을 사용

정리하자면 둘 다 상주나 주소를 절대로 하되 0, 0과 1, 1을 비교하기 위해 1, 1 사용할 때 피연산자 메모리 부분을 1바이트 확장.

R비트를 두어 레지스터 주소 지정 모드를 지원한다.
R비트가 1이면 레지스터 주소 지정 모드로 해석한다.

I N 비트 조합은 (1, 1) 혹은 (0, 1)이고 
X, B, C 비트들도 무의미하므로 레지스터의 개수로 정의한다.

X B C 조합

1, 1, 1 -> 레지스터 개수가 3개 4 X 3 = 12비트
1, 1, 0 -> 레지스터 개수가 2개 4 X 2 = 8비트
1, 0, 0 -> 레지스터 개수가 1개 4 X 1 = 4비트

XVM 명령어 뒤에 i를 추가하면 피연산자를 상수로 간주하여 그 값 자체를 피연산자 값으로 즉시 사용한다. (i비트가 1)

명령어 뒤에 n을 추가하면 피연산자를 간접 주소로 인식한다. (n비트가 1)

명령어 뒤에 rn을 추가하면 피연산자를 간접 주소 지정 레지스터로 간주한다. (n비트하고 r비트가 1)

```
